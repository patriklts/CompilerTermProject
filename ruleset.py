# ruleset.py

# Dictionary for derivations 
derivations = {
    0 : "CODE -> TYPE CODE",  
    1 : "CODE -> ''",
    2 : "TYPE -> vtype CODE'",
    3 : "CODE' -> VDECL",
    4 : "CODE' -> FDECL",
    5 : "VDECL -> id VDECL'",
    6 : "VDECL' -> semi",
    7 : "VDECL' -> ASSIGN semi",
    8 : "ASSIGN -> assign RHS",
    9 : "RHS -> EXPR",
    10 : "RHS -> literal ",
    11 : "RHS -> character", 
    12 : "RHS -> boolstr",
    13 : "EXPR -> TERM EXPR'",
    14 : "EXPR' -> addsub TERM EXPR'",
    15 : "EXPR' -> ''",
    16 : "TERM -> FACTOR TERM'",
    17 : "TERM' -> multdiv FACTOR TERM'",
    18 : "TERM' -> ''",
    19 : "FACTOR -> lparen EXPR rparen",
    20 : "FACTOR -> num",
    21 : "FACTOR -> id",
    22 : "FDECL -> id lparen ARG rparen lbrace BLOCK RETURN rbrace",
    23 : "ARG -> vtype id MOREARGS",
    24 : "ARG -> ''",
    25 : "MOREARGS -> comma vtype id MOREARGS",
    26 : "MOREARGS -> ''",
    27 : "BLOCK -> STMT BLOCK", 
    28 : "BLOCK -> ''",
    29 : "STMT -> vtype VDECL",
    30 : "STMT -> ASSIGN semi",
    31 : "STMT -> if lparen COND rparen lbrace BLOCK rbrace ELSE",
    32 : "STMT -> while lparen COND rparen lbrace BLOCK rbrace",
    33 : "COND -> boolstr COND'",
    34 : "COND' -> comp COND",
    35 : "COND' -> ''",
    36 : "ELSE -> else lbrace BLOCK rbrace", 
    37 : "ELSE -> ''",
    38 : "RETURN -> return RHS semi"
}

# Dictionary for action mapping of SLR table
action_map = {
    0: {'vtype': 's2'},
    1: {'vtype': 's2', '$': 'r1'},
    2: {'id': 's7'},
    3: {'$': 'acc'},    
    4: {'vtype': 'r2', '$': 'r2'},
    5: {'vtype': 'r3', '$': 'r3'},
    6: {'vtype': 'r4', '$': 'r4'},
    7: {'semi': 's10', 'assign': 's12', 'lparen': 's9'},
    8: {'vtype': 'r5', 'assign': 'r5', 'rbrace': 'r5', 'if': 'r5', 'while': 'r5', 'return': 'r5', '$': 'r5'},
    9: {'vtype': 's14', 'rparen': 'r24'},
    10: {'vtype': 'r6', 'assign': 'r6', 'rbrace': 'r6', '$': 'r6', 'if': 'r6', 'while': 'r6', 'return': 'r6'},
    11: {'semi': 's15'},
    12: {'id' : 's25', 'literal': 's18', 'character': 's19', 'boolstr': 's20', 'lparen': 's23', 'num': 's24'},
    13: {'rparen': 's26'},
    14: {'id': 's27'},
    15: {'vtype': 'r7', 'assign': 'r7', 'rbrace': 'r7', 'if': 'r7', 'while': 'r7', 'return': 'r7', '$': 'r7'},
    16: {'semi': 'r8'},
    17: {'semi': 'r9'},
    18: {'semi': 'r10'},
    19: {'semi': 'r11'},
    20: {'semi': 'r12'},
    21: {'semi': 'r15', 'addsub': 's29', 'rparen': 'r15'},
    22: {'semi': 'r18', 'addsub': 'r18', 'multdiv': 's31', 'rparen': 'r18'},
    23: {'id': 's25', 'lparen': 's23', 'num': 's24'},
    24: {'semi': 'r20', 'addsub': 'r20', 'multdiv': 'r20', 'rparen': 'r20'},
    25: {'semi': 'r21', 'addsub': 'r21', 'multdiv': 'r21', 'rparen': 'r21'},
    26: {'lbrace': 's33'},
    27: {'rparen': 'r26', 'comma': 's35'},
    28: {'semi': 'r13', 'rparen': 'r13'},
    29: {'id': 's25', 'lparen': 's23', 'num': 's24'},
    30: {'semi': 'r16', 'addsub': 'r16', 'rparen': 'r16'},
    31: {'id': 's25', 'lparen': 's23', 'num': 's24'},
    32: {'rparen': 's38'},
    33: {'vtype': 's41', 'assign': 's12', 'rbrace': 'r28', 'if': 's43', 'while': 's44', "return": 'r28'},
    34: {'rparen': 'r23'},
    35: {'vtype': 's45'},
    36: {'semi': 'r15', 'addsub': 's29', 'rparen': 'r15'},
    37: {'semi': 'r18', 'addsub': 'r18', 'multdiv': 's31', 'rparen': 'r18'},
    38: {'semi': 'r19', 'addsub': 'r19', 'multdiv': 'r19', 'rparen': 'r19'},
    39: {'return': 's49'},
    40: {'vtype': 's41', 'assign': 's12', 'rbrace': 'r28', 'if': 's43', 'while': 's44', "return": 'r28'},
    41: {'id': 's52'},
    42: {'semi': 's53'},
    43: {'lparen': 's54'},
    44: {'lparen': 's55'},
    45: {'id': 's56'},
    46: {'semi': 'r14', 'rparen': 'r14'},
    47: {'semi': 'r17', 'addsub': 'r17', 'rparen': 'r17'},
    48: {'rbrace': 's57'},
    49: {'id': 's25', 'literal': 's18', 'character': 's19', 'boolstr': 's20', 'lparen': 's23', 'num': 's24'},
    50: {'rbrace': 'r27', 'return': 'r27'},
    51: {'vtype': 'r29', 'assign': 'r29', 'rbrace': 'r29', 'if': 'r29', 'while': 'r29', 'return': 'r29'},
    52: {'semi': 's10', 'assign': 's12'},
    53: {'vtype': 'r30', 'assign': 'r30', 'rbrace': 'r30', 'if': 'r30', 'while': 'r30', 'return': 'r30'},
    54: {'boolstr': 's60'},
    55: {'boolstr': 's60'},
    56: {'rparen': 'r26', 'comma': 's35'},
    57: {'vtype': 'r22', '$': 'r22'},
    58: {'semi': 's63'},
    59: {'rparen': 's64'},
    60: {'rparen': 'r35', 'comp': 's66'},
    61: {'rparen': 's67'},
    62: {'rparen': 'r25'},
    63: {'rbrace': 'r38'},
    64: {'lbrace': 's68'},
    65: {'rparen': 'r33'},
    66: {'boolstr': 's60'},
    67: {'lbrace': 's70'},
    68: {'vtype': 's41', 'assign': 's12', 'rbrace': 'r28', 'if': 's43', 'while': 's44', 'return': 'r28'},
    69: {'rparen': 'r34'},
    70: {'vtype': 's41', 'assign': 's12', 'rbrace': 'r28', 'if': 's43', 'while': 's44', 'return': 'r28'},
    71: {'rbrace': 's73'},
    72: {'rbrace': 's74'},
    73: {'vtype': 'r37', 'assign': 'r37', 'rbrace': 'r37', 'if': 'r37', 'while': 'r37', 'else': 's76', 'return': 'r37'},
    74: {'vtype': 'r32', 'assign': 'r32', 'rbrace': 'r32', 'if': 'r32', 'while': 'r32', 'return': 'r32'},
    75: {'vtype': 'r31', 'assign': 'r31', 'rbrace': 'r31', 'if': 'r31', 'while': 'r31', 'return': 'r31'},
    76: {'lbrace': 's77'},
    77: {'vtype': 's41', 'assign': 's12', 'rbrace': 'r28', 'if': 's43', 'while': 's44', 'return': 'r28'},
    78: {'rbrace': 's79'},
    79: {'vtype': 'r36', 'assign': 'r36', 'rbrace': 'r36', 'if': 'r36', 'while': 'r36', 'return': 'r36'}
}

# Dictionary for goto mapping of SLR table
goto_map = { 
    0: {"TYPE": 1},
    1: {"CODE": 3, "TYPE": 1},
    2: {"CODE'": 4, "VDECL": 5, "FDECL": 6},
    3: {},
    4: {},
    5: {},
    6: {},
    7: {"VDECL'": 8, "ASSIGN": 11},
    8: {},
    9: {"ARG": 13},
    10: {},
    11: {},
    12: {"RHS": 16, "EXPR": 17, "TERM": 21, "FACTOR": 22},
    13: {},
    14: {},
    15: {},
    16: {},
    17: {},
    18: {},
    19: {},
    20: {},
    21: {"EXPR'": 28},
    22: {"TERM'": 30},
    23: {"EXPR": 32, "TERM": 21, "FACTOR": 22},
    24: {},
    25: {},
    26: {},
    27: {"MOREARGS": 34},
    28: {},
    29: {"FACTOR": 22, "TERM": 36},
    30: {},
    31: {"FACTOR": 37},
    32: {},
    33: {"ASSIGN": 42, "BLOCK": 39, "STMT": 40},
    34: {},
    35: {},
    36: {"EXPR'": 46},
    37: {"TERM'": 47},
    38: {},
    39: {"RETURN": 48},
    40: {"ASSIGN": 42, "BLOCK": 50, "STMT": 40},
    41: {"VDECL": 51},
    42: {},
    43: {},
    44: {},
    45: {},
    46: {},
    47: {},
    48: {},
    49: {"RHS": 58, "EXPR": 17, "TERM": 21, "FACTOR": 22},
    50: {},
    51: {},
    52: {"VDECL'": 8, "ASSIGN": 11},
    53: {},
    54: {"COND": 59},
    55: {"COND": 61},
    56: {"MOREARGS": 62},
    57: {},
    58: {},
    59: {},
    60: {"COND'": 65},
    61: {},
    62: {},
    63: {},
    64: {},
    65: {},
    66: {"COND": 69},
    67: {},
    68: {"ASSIGN": 42, "BLOCK": 71, "STMT": 40},
    69: {},
    70: {"ASSSIGN": 42, "BLOCK": 72, "STMT": 40},
    71: {},
    72: {},
    73: {"ELSE": 75},
    74: {},
    75: {},
    76: {},
    77: {"ASSIGN": 42, "BLOCK": 78, "STMT": 40},
    78: {},
    79: {}
}